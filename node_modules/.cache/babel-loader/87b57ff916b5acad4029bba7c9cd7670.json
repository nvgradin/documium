{"ast":null,"code":"import _toConsumableArray from\"/Users/nazarethavaqueirogradin/Documents/Grupo Gradi\\u0301n/testeo/Shreyu_react_v1.0.0/shreyu_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/nazarethavaqueirogradin/Documents/Grupo Gradi\\u0301n/testeo/Shreyu_react_v1.0.0/shreyu_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useEffect,useState}from'react';import{useForm}from'react-hook-form';import{Link}from'react-router-dom';import{Card,Dropdown,Row,Col}from'react-bootstrap';import classNames from'classnames';import*as yup from'yup';import{yupResolver}from'@hookform/resolvers/yup';// components\nimport{FormInput}from'../../../components/';import Scrollbar from'../../../components/Scrollbar';import Loader from'../../../components/Loader';import ProfileModal from'./ProfileModal';import VideocallModal from'./VideocallModal';import VoicecallModal from'./VoicecallModal';// default data\nimport{CHATHISTORY}from'./data';// images\nimport avatar1 from'../../../assets/images/users/avatar-2.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChatHeader=function ChatHeader(_ref){var selectedUser=_ref.selectedUser;// handle profile modal\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showProfileModal=_useState2[0],setShowProfileModal=_useState2[1];var handleProfileModalClose=function handleProfileModalClose(){return setShowProfileModal(false);};var handleProfileModalShow=function handleProfileModalShow(){return setShowProfileModal(true);};// handle video modal\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showVideocallModal=_useState4[0],setShowVideocallModal=_useState4[1];var handleVideocallModalClose=function handleVideocallModalClose(){return setShowVideocallModal(false);};var handleVideocallModalShow=function handleVideocallModalShow(){return setShowVideocallModal(true);};// handle voice modal\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showVoicelModal=_useState6[0],setShowVoicelModal=_useState6[1];var handleVoicelModalClose=function handleVoicelModalClose(){return setShowVoicelModal(false);};var handleVoicelModalShow=function handleVoicelModalShow(){return setShowVoicelModal(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex pb-2 border-bottom align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedUser.avatar,className:\"me-2 rounded-circle\",height:\"48\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mt-0 mb-0 fs-14\",children:selectedUser.name}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Online\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow-1\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-inline float-end mb-0\",children:[/*#__PURE__*/_jsx(Dropdown,{as:\"li\",className:\"list-inline-item fs-18 me-3\",children:/*#__PURE__*/_jsx(Dropdown.Toggle,{id:\"dropdown-apps\",as:\"a\",className:\"cursor-pointer text-dark\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-telephone-plus\",onClick:function onClick(){return handleVoicelModalShow();}})})}),/*#__PURE__*/_jsx(Dropdown,{as:\"li\",className:\"list-inline-item fs-18 me-3\",children:/*#__PURE__*/_jsx(Dropdown.Toggle,{id:\"dropdown-apps\",as:\"a\",className:\"cursor-pointer text-dark\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-camera-video\",onClick:function onClick(){return handleVideocallModalShow();}})})}),/*#__PURE__*/_jsxs(Dropdown,{as:\"li\",className:\"list-inline-item fs-18\",children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{id:\"dropdown-apps\",as:\"a\",className:\"cursor-pointer text-dark\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-three-dots-vertical\"})}),/*#__PURE__*/_jsxs(Dropdown.Menu,{className:\"dropdown-menu-end\",children:[/*#__PURE__*/_jsxs(Dropdown.Item,{href:\"#/\",onClick:function onClick(){return handleProfileModalShow();},children:[' ',/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-circle fs-18 me-2\"}),\"View Profile\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{href:\"#/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-music-note-list fs-18 me-2\"}),\"Media, Links and Docs\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{href:\"#/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-search fs-18 me-2\"}),\"Search\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{href:\"#/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-image fs-18 me-2\"}),\"Wallpaper\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{href:\"#/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-right-circle fs-18 me-2\"}),\"More\"]})]})]})]})})]}),/*#__PURE__*/_jsx(ProfileModal,{show:showProfileModal,handleClose:handleProfileModalClose}),/*#__PURE__*/_jsx(VideocallModal,{show:showVideocallModal,handleClose:handleVideocallModalClose}),/*#__PURE__*/_jsx(VoicecallModal,{show:showVoicelModal,handleClose:handleVoicelModalClose})]});};// user messages\nvar UserMessage=function UserMessage(_ref2){var message=_ref2.message,toUser=_ref2.toUser;return/*#__PURE__*/_jsx(_Fragment,{children:(message.messages||[]).map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{className:classNames('clearfix',{odd:message.from.id===toUser.id,'mb-1':message.messages.length>1&&index!==message.messages.length-1}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-text ms-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:classNames('d-flex',{'justify-content-end':message.from.id===toUser.id}),children:[message.from.id===toUser.id&&/*#__PURE__*/_jsxs(Dropdown,{className:\"conversation-actions\",children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{as:\"a\",className:\"cursor-pointer text-dark pe-1\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-three-dots-vertical fs-14\"})}),/*#__PURE__*/_jsxs(Dropdown.Menu,{align:\"end\",children:[/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-reply fs-18 me-2\"}),\"Reply\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-star fs-18 me-2\"}),\"Reply\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trash fs-18 me-2\"}),\"Delete\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-files fs-18 me-2\"}),\"Copy\"]})]})]}),item.type==='text'&&/*#__PURE__*/_jsx(\"div\",{className:\"ctext-wrap\",children:/*#__PURE__*/_jsx(\"p\",{children:item.value})}),item.type==='file'&&/*#__PURE__*/_jsx(Card,{className:\"mb-1 shadow-none border text-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-2\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"avatar-sm bg-primary text-white\",children:/*#__PURE__*/_jsx(\"span\",{className:\"avatar-title rounded\",children:\".ZIP\"})})}),/*#__PURE__*/_jsxs(Col,{className:\"ps-0\",children:[/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"text-muted fw-bold\",children:item.value.file}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:item.value.size})]}),/*#__PURE__*/_jsx(Col,{className:\"col-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"ps-3 fs-24\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-down-square\"})})})]})})}),message.from.id!==toUser.id&&/*#__PURE__*/_jsxs(Dropdown,{className:\"conversation-actions\",children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{as:\"a\",className:\"cursor-pointer text-dark ps-1\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-three-dots-vertical fs-14\"})}),/*#__PURE__*/_jsxs(Dropdown.Menu,{align:\"start\",children:[/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-reply fs-18 me-2\"}),\"Reply\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-star fs-18 me-2\"}),\"Reply\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-trash fs-18 me-2\"}),\"Delete\"]}),/*#__PURE__*/_jsxs(Dropdown.Item,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-files fs-18 me-2\"}),\"Copy\"]})]})]})]}),index===message.messages.length-1&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted fs-12 mb-0 mt-1\",children:[message.sendOn,message.from.id===toUser.id&&/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check2-all ms-1 text-success\"})]})]})},index);})});};// ChatArea\nvar ChatArea=function ChatArea(_ref3){var selectedUser=_ref3.selectedUser;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),chatHistory=_useState10[0],setChatHistory=_useState10[1];var _useState11=useState({id:9,name:'Shreyu N',avatar:avatar1}),_useState12=_slicedToArray(_useState11,1),toUser=_useState12[0];/*\n     *  Fetches the messages for selected user\n     */var getMessagesForUser=useCallback(function(){if(selectedUser){setLoading(true);setTimeout(function(){var modifiedChatHistory=_toConsumableArray(CHATHISTORY).map(function(record){var test={id:record.id,day:record.day,messages:_toConsumableArray(record.messages).filter(function(m){return m.to.id===toUser.id&&m.from.id===selectedUser.id||toUser.id===m.from.id&&m.to.id===selectedUser.id;})};return test;});setChatHistory(_toConsumableArray(modifiedChatHistory));setLoading(false);},750);}},[selectedUser,toUser.id]);useEffect(function(){getMessagesForUser();},[getMessagesForUser]);/*\n     * form validation schema\n     */var schemaResolver=yupResolver(yup.object().shape({newMessage:yup.string().required('Please enter your messsage')}));/*\n     * form methods\n     */var methods=useForm({resolver:schemaResolver});var handleSubmit=methods.handleSubmit,register=methods.register,control=methods.control,errors=methods.formState.errors,reset=methods.reset;/**\n     * sends the chat message\n     */var sendChatMessage=function sendChatMessage(values){var newUserMessages=_toConsumableArray(chatHistory[chatHistory.length-1].messages);newUserMessages.push({id:chatHistory[chatHistory.length-1].messages.length+1,from:toUser,to:selectedUser,messages:[{type:'text',value:values['newMessage']}],sendOn:new Date().getHours()+':'+new Date().getMinutes()});var modifiedChatHistory=_toConsumableArray(chatHistory).map(function(record,index){var test={id:record.id,day:record.day,messages:index===chatHistory.length-1?newUserMessages:record.messages};return test;});setChatHistory(_toConsumableArray(modifiedChatHistory));reset();};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(ChatHeader,{selectedUser:selectedUser}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",children:[/*#__PURE__*/_jsx(Scrollbar,{style:{height:'509px',width:'100%'},children:/*#__PURE__*/_jsx(\"ul\",{className:\"conversation-list px-0 h-100\",children:(chatHistory||[]).map(function(item,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-light text-dark position-absolute top-0 start-50 translate-middle\",children:item.day})})]}),(item.messages||[]).map(function(message,index){return/*#__PURE__*/_jsx(UserMessage,{message:message,toUser:toUser},index);})]},index);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 bg-light p-3 rounded\",children:/*#__PURE__*/_jsx(\"form\",{noValidate:true,name:\"chat-form\",id:\"chat-form\",onSubmit:handleSubmit(sendChatMessage),children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col mb-2 mb-sm-0\",children:/*#__PURE__*/_jsx(FormInput,{type:\"text\",name:\"newMessage\",className:\"border-0\",placeholder:\"Enter your text\",register:register,errors:errors,control:control},\"newMessage\")}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"btn btn-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-emoji-smile fs-18\"})}),/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"btn btn-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-paperclip fs-18\"})}),/*#__PURE__*/_jsx(Link,{to:\"#\",className:\"btn btn-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-camera fs-18\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success chat-send\",children:/*#__PURE__*/_jsx(\"i\",{className:\"uil uil-message\"})})]})})]})})})]})]})})});};export default ChatArea;","map":{"version":3,"sources":["/Users/nazarethavaqueirogradin/Documents/Grupo GradiÌn/testeo/Shreyu_react_v1.0.0/shreyu_react/src/pages/apps/Chat/ChatArea.tsx"],"names":["React","useCallback","useEffect","useState","useForm","Link","Card","Dropdown","Row","Col","classNames","yup","yupResolver","FormInput","Scrollbar","Loader","ProfileModal","VideocallModal","VoicecallModal","CHATHISTORY","avatar1","ChatHeader","selectedUser","showProfileModal","setShowProfileModal","handleProfileModalClose","handleProfileModalShow","showVideocallModal","setShowVideocallModal","handleVideocallModalClose","handleVideocallModalShow","showVoicelModal","setShowVoicelModal","handleVoicelModalClose","handleVoicelModalShow","avatar","name","UserMessage","message","toUser","messages","map","item","index","odd","from","id","length","type","value","file","size","sendOn","ChatArea","loading","setLoading","chatHistory","setChatHistory","getMessagesForUser","setTimeout","modifiedChatHistory","record","test","day","filter","m","to","schemaResolver","object","shape","newMessage","string","required","methods","resolver","handleSubmit","register","control","errors","formState","reset","sendChatMessage","values","newUserMessages","push","Date","getHours","getMinutes","height","width"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { Card, Dropdown, Row, Col } from 'react-bootstrap';\nimport classNames from 'classnames';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\n\n// components\nimport { FormInput } from '../../../components/';\nimport Scrollbar from '../../../components/Scrollbar';\nimport Loader from '../../../components/Loader';\n\nimport ProfileModal from './ProfileModal';\nimport VideocallModal from './VideocallModal';\nimport VoicecallModal from './VoicecallModal';\n\n// default data\nimport { CHATHISTORY, ChatUserType, ChatMessage, MessageItem } from './data';\n\n// images\nimport avatar1 from '../../../assets/images/users/avatar-2.jpg';\n\ninterface ChatHeaderProps {\n    selectedUser: ChatUserType;\n}\n\nconst ChatHeader = ({ selectedUser }: ChatHeaderProps) => {\n    // handle profile modal\n    const [showProfileModal, setShowProfileModal] = useState<boolean>(false);\n\n    const handleProfileModalClose = () => setShowProfileModal(false);\n    const handleProfileModalShow = () => setShowProfileModal(true);\n\n    // handle video modal\n    const [showVideocallModal, setShowVideocallModal] = useState<boolean>(false);\n\n    const handleVideocallModalClose = () => setShowVideocallModal(false);\n    const handleVideocallModalShow = () => setShowVideocallModal(true);\n\n    // handle voice modal\n    const [showVoicelModal, setShowVoicelModal] = useState<boolean>(false);\n\n    const handleVoicelModalClose = () => setShowVoicelModal(false);\n    const handleVoicelModalShow = () => setShowVoicelModal(true);\n\n    return (\n        <>\n            <div className=\"d-flex pb-2 border-bottom align-items-center\">\n                <img src={selectedUser.avatar} className=\"me-2 rounded-circle\" height=\"48\" alt=\"\" />\n                <div>\n                    <h5 className=\"mt-0 mb-0 fs-14\">{selectedUser.name}</h5>\n                    <p className=\"mb-0\">Online</p>\n                </div>\n                <div className=\"flex-grow-1\">\n                    <ul className=\"list-inline float-end mb-0\">\n                        <Dropdown as=\"li\" className=\"list-inline-item fs-18 me-3\">\n                            <Dropdown.Toggle id=\"dropdown-apps\" as=\"a\" className=\"cursor-pointer text-dark\">\n                                <i className=\"bi bi-telephone-plus\" onClick={() => handleVoicelModalShow()}></i>\n                            </Dropdown.Toggle>\n                        </Dropdown>\n\n                        <Dropdown as=\"li\" className=\"list-inline-item fs-18 me-3\">\n                            <Dropdown.Toggle id=\"dropdown-apps\" as=\"a\" className=\"cursor-pointer text-dark\">\n                                <i className=\"bi bi-camera-video\" onClick={() => handleVideocallModalShow()}></i>\n                            </Dropdown.Toggle>\n                        </Dropdown>\n\n                        <Dropdown as=\"li\" className=\"list-inline-item fs-18\">\n                            <Dropdown.Toggle id=\"dropdown-apps\" as=\"a\" className=\"cursor-pointer text-dark\">\n                                <i className=\"bi bi-three-dots-vertical\"></i>\n                            </Dropdown.Toggle>\n\n                            <Dropdown.Menu className=\"dropdown-menu-end\">\n                                <Dropdown.Item href=\"#/\" onClick={() => handleProfileModalShow()}>\n                                    {' '}\n                                    <i className=\"bi bi-person-circle fs-18 me-2\"></i>View Profile\n                                </Dropdown.Item>\n                                <Dropdown.Item href=\"#/\">\n                                    <i className=\"bi bi-music-note-list fs-18 me-2\"></i>Media, Links and Docs\n                                </Dropdown.Item>\n                                <Dropdown.Item href=\"#/\">\n                                    <i className=\"bi bi-search fs-18 me-2\"></i>Search\n                                </Dropdown.Item>\n                                <Dropdown.Item href=\"#/\">\n                                    <i className=\"bi bi-image fs-18 me-2\"></i>Wallpaper\n                                </Dropdown.Item>\n                                <Dropdown.Item href=\"#/\">\n                                    <i className=\"bi bi-arrow-right-circle fs-18 me-2\"></i>More\n                                </Dropdown.Item>\n                            </Dropdown.Menu>\n                        </Dropdown>\n                    </ul>\n                </div>\n            </div>\n\n            {/* Profile Modal */}\n            <ProfileModal show={showProfileModal} handleClose={handleProfileModalClose} />\n\n            {/* video call Modal */}\n            <VideocallModal show={showVideocallModal} handleClose={handleVideocallModalClose} />\n\n            {/* Voice call Modal */}\n            <VoicecallModal show={showVoicelModal} handleClose={handleVoicelModalClose} />\n        </>\n    );\n};\n\ninterface UserMessageProps {\n    message: MessageItem;\n    toUser: ChatUserType;\n}\n// user messages\nconst UserMessage = ({ message, toUser }: UserMessageProps) => {\n    return (\n        <>\n            {(message.messages || []).map((item, index) => {\n                return (\n                    <li\n                        key={index}\n                        className={classNames('clearfix', {\n                            odd: message.from.id === toUser.id,\n                            'mb-1': message.messages.length > 1 && index !== message.messages.length - 1,\n                        })}>\n                        <div className=\"conversation-text ms-0\">\n                            <div\n                                className={classNames('d-flex', {\n                                    'justify-content-end': message.from.id === toUser.id,\n                                })}>\n                                {message.from.id === toUser.id && (\n                                    <Dropdown className=\"conversation-actions\">\n                                        <Dropdown.Toggle as=\"a\" className=\"cursor-pointer text-dark pe-1\">\n                                            <i className=\"bi bi-three-dots-vertical fs-14\"></i>\n                                        </Dropdown.Toggle>\n                                        <Dropdown.Menu align=\"end\">\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-reply fs-18 me-2\"></i>Reply\n                                            </Dropdown.Item>\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-star fs-18 me-2\"></i>Reply\n                                            </Dropdown.Item>\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-trash fs-18 me-2\"></i>Delete\n                                            </Dropdown.Item>\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-files fs-18 me-2\"></i>Copy\n                                            </Dropdown.Item>\n                                        </Dropdown.Menu>\n                                    </Dropdown>\n                                )}\n\n                                {item.type === 'text' && (\n                                    <div className=\"ctext-wrap\">\n                                        <p>{item.value}</p>\n                                    </div>\n                                )}\n\n                                {item.type === 'file' && (\n                                    <Card className=\"mb-1 shadow-none border text-start\">\n                                        <div className=\"p-2\">\n                                            <Row className=\"align-items-center\">\n                                                <Col className=\"col-auto\">\n                                                    <div className=\"avatar-sm bg-primary text-white\">\n                                                        <span className=\"avatar-title rounded\">.ZIP</span>\n                                                    </div>\n                                                </Col>\n                                                <Col className=\"ps-0\">\n                                                    <Link to=\"#\" className=\"text-muted fw-bold\">\n                                                        {item.value.file}\n                                                    </Link>\n                                                    <p className=\"mb-0\">{item.value.size}</p>\n                                                </Col>\n                                                <Col className=\"col-auto\">\n                                                    <Link to=\"#\" className=\"ps-3 fs-24\">\n                                                        <i className=\"bi bi-arrow-down-square\"></i>\n                                                    </Link>\n                                                </Col>\n                                            </Row>\n                                        </div>\n                                    </Card>\n                                )}\n\n                                {message.from.id !== toUser.id && (\n                                    <Dropdown className=\"conversation-actions\">\n                                        <Dropdown.Toggle as=\"a\" className=\"cursor-pointer text-dark ps-1\">\n                                            <i className=\"bi bi-three-dots-vertical fs-14\"></i>\n                                        </Dropdown.Toggle>\n                                        <Dropdown.Menu align=\"start\">\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-reply fs-18 me-2\"></i>Reply\n                                            </Dropdown.Item>\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-star fs-18 me-2\"></i>Reply\n                                            </Dropdown.Item>\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-trash fs-18 me-2\"></i>Delete\n                                            </Dropdown.Item>\n                                            <Dropdown.Item>\n                                                <i className=\"bi bi-files fs-18 me-2\"></i>Copy\n                                            </Dropdown.Item>\n                                        </Dropdown.Menu>\n                                    </Dropdown>\n                                )}\n                            </div>\n                            {index === message.messages.length - 1 && (\n                                <p className=\"text-muted fs-12 mb-0 mt-1\">\n                                    {message.sendOn}\n                                    {message.from.id === toUser.id && (\n                                        <i className=\"bi bi-check2-all ms-1 text-success\"></i>\n                                    )}\n                                </p>\n                            )}\n                        </div>\n                    </li>\n                );\n            })}\n        </>\n    );\n};\n\ninterface ChatAreaProps {\n    selectedUser: ChatUserType;\n}\n\n// ChatArea\nconst ChatArea = ({ selectedUser }: ChatAreaProps) => {\n    const [loading, setLoading] = useState<boolean>(false);\n    const [chatHistory, setChatHistory] = useState<ChatMessage[]>([]);\n    const [toUser] = useState<ChatUserType>({\n        id: 9,\n        name: 'Shreyu N',\n        avatar: avatar1,\n    });\n\n    /*\n     *  Fetches the messages for selected user\n     */\n    const getMessagesForUser = useCallback(() => {\n        if (selectedUser) {\n            setLoading(true);\n            setTimeout(() => {\n                const modifiedChatHistory = [...CHATHISTORY].map((record) => {\n                    const test = {\n                        id: record.id,\n                        day: record.day,\n                        messages: [...record.messages].filter(\n                            (m) =>\n                                (m.to.id === toUser.id && m.from.id === selectedUser.id) ||\n                                (toUser.id === m.from.id && m.to.id === selectedUser.id)\n                        ),\n                    };\n                    return test;\n                });\n                setChatHistory([...modifiedChatHistory]);\n                setLoading(false);\n            }, 750);\n        }\n    }, [selectedUser, toUser.id]);\n\n    useEffect(() => {\n        getMessagesForUser();\n    }, [getMessagesForUser]);\n\n    /*\n     * form validation schema\n     */\n    const schemaResolver = yupResolver(\n        yup.object().shape({\n            newMessage: yup.string().required('Please enter your messsage'),\n        })\n    );\n\n    /*\n     * form methods\n     */\n    const methods = useForm({ resolver: schemaResolver });\n    const {\n        handleSubmit,\n        register,\n        control,\n        formState: { errors },\n        reset,\n    } = methods;\n\n    /**\n     * sends the chat message\n     */\n    const sendChatMessage = (values: { newMessage: string }) => {\n        let newUserMessages = [...chatHistory[chatHistory.length - 1].messages];\n        newUserMessages.push({\n            id: chatHistory[chatHistory.length - 1].messages.length + 1,\n            from: toUser,\n            to: selectedUser,\n            messages: [{ type: 'text', value: values['newMessage'] }],\n            sendOn: new Date().getHours() + ':' + new Date().getMinutes(),\n        });\n\n        const modifiedChatHistory = [...chatHistory].map((record, index) => {\n            const test = {\n                id: record.id,\n                day: record.day,\n                messages: index === chatHistory.length - 1 ? newUserMessages : record.messages,\n            };\n            return test;\n        });\n        setChatHistory([...modifiedChatHistory]);\n        reset();\n    };\n\n    return (\n        <>\n            <Card>\n                <Card.Body>\n                    {loading && <Loader />}\n                    <ChatHeader selectedUser={selectedUser} />\n\n                    <div className=\"mt-1\">\n                        <Scrollbar style={{ height: '509px', width: '100%' }}>\n                            <ul className=\"conversation-list px-0 h-100\">\n                                {(chatHistory || []).map((item, index) => {\n                                    return (\n                                        <React.Fragment key={index}>\n                                            <li className=\"position-relative\">\n                                                <hr />\n                                                <h4>\n                                                    <span className=\"badge bg-light text-dark position-absolute top-0 start-50 translate-middle\">\n                                                        {item.day}\n                                                    </span>\n                                                </h4>\n                                            </li>\n                                            {(item.messages || []).map((message, index) => {\n                                                return <UserMessage key={index} message={message} toUser={toUser} />;\n                                            })}\n                                        </React.Fragment>\n                                    );\n                                })}\n                            </ul>\n                        </Scrollbar>\n\n                        <div className=\"mt-2 bg-light p-3 rounded\">\n                            <form noValidate name=\"chat-form\" id=\"chat-form\" onSubmit={handleSubmit(sendChatMessage)}>\n                                <div className=\"row\">\n                                    <div className=\"col mb-2 mb-sm-0\">\n                                        <FormInput\n                                            type=\"text\"\n                                            name=\"newMessage\"\n                                            className=\"border-0\"\n                                            placeholder=\"Enter your text\"\n                                            register={register}\n                                            key=\"newMessage\"\n                                            errors={errors}\n                                            control={control}\n                                        />\n                                    </div>\n                                    <div className=\"col-sm-auto\">\n                                        <div className=\"btn-group\">\n                                            <Link to=\"#\" className=\"btn btn-light\">\n                                                <i className=\"bi bi-emoji-smile fs-18\"></i>\n                                            </Link>\n                                            <Link to=\"#\" className=\"btn btn-light\">\n                                                <i className=\"bi bi-paperclip fs-18\"></i>\n                                            </Link>\n                                            <Link to=\"#\" className=\"btn btn-light\">\n                                                <i className=\"bi bi-camera fs-18\"></i>\n                                            </Link>\n                                            <button type=\"submit\" className=\"btn btn-success chat-send\">\n                                                <i className=\"uil uil-message\"></i>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </Card.Body>\n            </Card>\n        </>\n    );\n};\n\nexport default ChatArea;\n"]},"metadata":{},"sourceType":"module"}