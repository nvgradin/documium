{"ast":null,"code":"import _objectSpread from\"/Users/nazarethavaqueirogradin/Documents/Grupo Gradi\\u0301n/testeo/Shreyu_react_v1.0.0/shreyu_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/Users/nazarethavaqueirogradin/Documents/Grupo Gradi\\u0301n/testeo/Shreyu_react_v1.0.0/shreyu_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React from'react';import{Route,Redirect}from'react-router-dom';import{APICore}from'../helpers/api/apiCore';import{jsx as _jsx}from\"react/jsx-runtime\";/**\n * Private Route forces the authorization before the route can be accessed\n * @param {*} param0\n * @returns\n */var PrivateRoute=function PrivateRoute(_ref){var Component=_ref.component,roles=_ref.roles,rest=_objectWithoutProperties(_ref,[\"component\",\"roles\"]);var api=new APICore();return/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:function render(props){if(api.isUserAuthenticated()===false){// not logged in so redirect to login page with the return url\nreturn/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/auth/login',state:{from:props['location']}}});}var loggedInUser=api.getLoggedInUser();// check if route is restricted by role\nif(roles&&roles.indexOf(loggedInUser.role)===-1){// role not authorised so redirect to home page\nreturn/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/'}});}// authorised so return component\nreturn/*#__PURE__*/_jsx(Component,_objectSpread({},props));}}));};export default PrivateRoute;","map":{"version":3,"sources":["/Users/nazarethavaqueirogradin/Documents/Grupo GradiÃÅn/testeo/Shreyu_react_v1.0.0/shreyu_react/src/routes/PrivateRoute.tsx"],"names":["React","Route","Redirect","APICore","PrivateRoute","Component","component","roles","rest","api","props","isUserAuthenticated","pathname","state","from","loggedInUser","getLoggedInUser","indexOf","role"],"mappings":"ucAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,CAAgBC,QAAhB,KAAiE,kBAAjE,CAEA,OAASC,OAAT,KAAwB,wBAAxB,C,2CAOA;AACA;AACA;AACA;AACA,GACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAiE,IAAnDC,CAAAA,SAAmD,MAA9DC,SAA8D,CAAxCC,KAAwC,MAAxCA,KAAwC,CAA9BC,IAA8B,sDAClF,GAAMC,CAAAA,GAAG,CAAG,GAAIN,CAAAA,OAAJ,EAAZ,CAEA,mBACI,KAAC,KAAD,gCACQK,IADR,MAEI,MAAM,CAAE,gBAACE,KAAD,CAAgC,CACpC,GAAID,GAAG,CAACE,mBAAJ,KAA8B,KAAlC,CAAyC,CACrC;AACA,mBACI,KAAC,QAAD,EACI,EAAE,CAAE,CACAC,QAAQ,CAAE,aADV,CAEAC,KAAK,CAAE,CAAEC,IAAI,CAAEJ,KAAK,CAAC,UAAD,CAAb,CAFP,CADR,EADJ,CAQH,CAED,GAAMK,CAAAA,YAAY,CAAGN,GAAG,CAACO,eAAJ,EAArB,CAEA;AACA,GAAIT,KAAK,EAAIA,KAAK,CAACU,OAAN,CAAcF,YAAY,CAACG,IAA3B,IAAqC,CAAC,CAAnD,CAAsD,CAClD;AACA,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE,CAAEN,QAAQ,CAAE,GAAZ,CAAd,EAAP,CACH,CACD;AACA,mBAAO,KAAC,SAAD,kBAAeF,KAAf,EAAP,CACH,CAxBL,GADJ,CA4BH,CA/BD,CAiCA,cAAeN,CAAAA,YAAf","sourcesContent":["import React from 'react';\nimport { Route, Redirect, RouteProps, RouteComponentProps } from 'react-router-dom';\n\nimport { APICore } from '../helpers/api/apiCore';\n\ninterface PrivateRouteProps {\n    component: React.FunctionComponent<RouteProps>;\n    roles?: string;\n}\n\n/**\n * Private Route forces the authorization before the route can be accessed\n * @param {*} param0\n * @returns\n */\nconst PrivateRoute = ({ component: Component, roles, ...rest }: PrivateRouteProps) => {\n    const api = new APICore();\n\n    return (\n        <Route\n            {...rest}\n            render={(props: RouteComponentProps) => {\n                if (api.isUserAuthenticated() === false) {\n                    // not logged in so redirect to login page with the return url\n                    return (\n                        <Redirect\n                            to={{\n                                pathname: '/auth/login',\n                                state: { from: props['location'] },\n                            }}\n                        />\n                    );\n                }\n\n                const loggedInUser = api.getLoggedInUser();\n\n                // check if route is restricted by role\n                if (roles && roles.indexOf(loggedInUser.role) === -1) {\n                    // role not authorised so redirect to home page\n                    return <Redirect to={{ pathname: '/' }} />;\n                }\n                // authorised so return component\n                return <Component {...props} />;\n            }}\n        />\n    );\n};\n\nexport default PrivateRoute;\n"]},"metadata":{},"sourceType":"module"}