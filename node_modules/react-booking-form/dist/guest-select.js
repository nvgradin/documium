import n,{useEffect as B}from"react";import{Popover as s,Portal as h}from"@headlessui/react";import{useSelectPopper as G}from"./use-select-popper";const $=(t,e)=>{if(e==="all"){const o=t==null?void 0:t.totalCount;return o?`${o} guest${o>1?"s":""}`:""}if(e==="each"){let o="";return t.value.forEach(r=>{const a=o?" | ":"";!r.value||(o=o.concat(`${a}${r.value} ${r.name}`))}),o}return e==null?void 0:e(t)},A=({form:t,name:e,menu:o,option:r,menuContainer:a,inputComponent:m,okButton:u,okText:y="Ok",placeholder:T,offset:C,countTextFormat:f="all",portal:g})=>{var l;const k=((l=t==null?void 0:t.state)==null?void 0:l[e]).value,{element:p,setElement:x,setPopper:E,styles:F,attributes:P}=G({offset:C});B(()=>{t.refs[e].current=p},[p]);const v=$(t.state[e],f),S=()=>{p==null||p.click()},O=g||h;return n.createElement(s,{as:n.Fragment},({open:c})=>n.createElement(n.Fragment,null,n.createElement(s.Button,{value:v,ref:x,as:m,placeholder:T,name:e,form:t,readOnly:!0}),n.createElement(O,null,n.createElement(s.Panel,{as:a,ref:E,static:!0,style:{...F.popper,pointerEvents:c?"":"none"},...P.popper},n.createElement(o,{open:c},k.map(i=>n.createElement(r,{key:i.name,form:t,name:e,option:i})),!!u&&n.createElement(u,{onClick:S},y))))))};export{A as GuestSelect};
